<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> ML with Monsoon | Daniel Agyapong </title> <meta name="author" content="Daniel Agyapong"> <meta name="description" content="This post explains some of the basic concepts you will need in your machine learning workflow using monsoon."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://engineerdanny.github.io/blog/2023/ML-With-Monsoon/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Daniel</span> Agyapong </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Daniel Agyapong </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">ML with Monsoon</h1> <p class="post-meta"> Created in September 02, 2023 </p> <p class="post-tags"> <a href="/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/category/python"> <i class="fa-solid fa-tag fa-sm"></i> python</a>   <a href="/blog/category/git"> <i class="fa-solid fa-tag fa-sm"></i> git</a>   <a href="/blog/category/github"> <i class="fa-solid fa-tag fa-sm"></i> github</a>   <a href="/blog/category/ml"> <i class="fa-solid fa-tag fa-sm"></i> ml</a>   <a href="/blog/category/monsoon"> <i class="fa-solid fa-tag fa-sm"></i> monsoon</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="introduction">Introduction</h2> <p>Welcome to the ML with Monsoon project! This blog post will guide you through some of the essential steps in setting up and executing machine learning workflows using the Monsoon HPC cluster. Monsoon is a high-performance computing (HPC) cluster at Northern Arizona University. It is a shared resource that provides researchers with the computational power needed to run large-scale simulations and data analysis. Although Monsoon is a powerful tool, it can be challenging to use for beginners. This blog post aims to provide a step-by-step guide to help you get started with machine learning on Monsoon. The concepts covered in this project will be applicable to any HPC cluster, so even if you are not using Monsoon, you can still benefit from this guide. We will cover how to connect to Monsoon, perform interactive debugging, submit batch jobs, and visualize key results.</p> <h2 id="connecting-to-monsoon">Connecting to Monsoon</h2> <p>To start using Monsoon, you can connect via the dashboard or through a secure shell (ssh).</p> <ul> <li> <p>Access through the monsoon <a href="https://ondemand.hpc.nau.edu/pun/sys/dashboard/" rel="external nofollow noopener" target="_blank">dashboard</a> Navigate to the Monsoon Dashboard and log in with your credentials.</p> </li> <li> <p>Access through the secure shell (ssh). Open your terminal and run the following command, replacing <username> with your actual NAU username. You will be prompted to enter your password.</username></p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-Y</span> &lt;username&gt;@monsoon.hpc.nau.edu
</code></pre></div> </div> </li> </ul> <h2 id="interactivedebug-work">Interactive/Debug Work</h2> <p>For interactive or debugging tasks, you can request a compute node. Here are two examples:</p> <ul> <li>Request a node with 4GB of RAM and 1 CPU for 24 hours: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>srun <span class="nt">-t</span> 24:00:00 <span class="nt">--mem</span><span class="o">=</span>4GB <span class="nt">--cpus-per-task</span><span class="o">=</span>1 <span class="nt">--pty</span> bash
</code></pre></div> </div> </li> <li>Request a node with 8GB of RAM and 1 CPU for 1 hour to run a Python script. <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>srun <span class="nt">-t</span> 1:00:00 <span class="nt">--mem</span><span class="o">=</span>8GB <span class="nt">--cpus-per-task</span><span class="o">=</span>1 python analysis.py
</code></pre></div> </div> </li> </ul> <h2 id="submitting-jobs">Submitting Jobs</h2> <p>For longer-running tasks, you can write a job script and submit it to the queue. Here is an example of a job script (jobscript.sh):</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/bash</span>
<span class="c">#SBATCH --job-name=test</span>
<span class="c">#SBATCH --output=/scratch/da2343/output.txt </span>
<span class="c">#SBATCH --error=/scratch/da2343/error.txt </span>
<span class="c">#SBATCH --time=20:00</span>
<span class="c">#SBATCH --mem=1GB</span>
<span class="c">#SBATCH --cpus-per-task=1</span>
python analysis.py
</code></pre></div></div> <p>Submit the job script using the following command:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbatch jobscript.sh
</code></pre></div></div> <h2 id="visualizing-results">Visualizing Results</h2> <h3 id="time-graph"><a href="https://github.com/EngineerDanny/ml_with_monsoon/tree/main/code/job_arrays_intermediate" rel="external nofollow noopener" target="_blank">Time Graph</a></h3> <p>Understanding the time performance of your machine learning models is crucial. The following graph illustrates the time taken for different stages in the workflow.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/time_graph-480.webp 480w,/assets/img/time_graph-800.webp 800w,/assets/img/time_graph-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/time_graph.png" class="img-fluid rounded z-depth-1" width="700px" height="500px" title="time_graph" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="algorithm-selection"><a href="https://github.com/EngineerDanny/ml_with_monsoon/tree/main/code/job_arrays_advanced" rel="external nofollow noopener" target="_blank">Algorithm Selection</a></h3> <p>Choosing the right algorithm can significantly impact the performance and accuracy of your model. Below is a graph showing the accuracy of different parallel algorithms.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/parallel_algo_acc-480.webp 480w,/assets/img/parallel_algo_acc-800.webp 800w,/assets/img/parallel_algo_acc-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/parallel_algo_acc.png" class="img-fluid rounded z-depth-1" width="700px" height="500px" title="parallel_algo_acc" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="hyper-parameter-tuning"><a href="https://github.com/EngineerDanny/ml_with_monsoon/tree/main/code/optimization" rel="external nofollow noopener" target="_blank">Hyper-Parameter Tuning</a></h3> <p>Hyper-parameter tuning is essential for optimizing the performance of your machine learning models. The following graph shows the loss during hyper-parameter tuning.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/loss_df_01-480.webp 480w,/assets/img/loss_df_01-800.webp 800w,/assets/img/loss_df_01-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/loss_df_01.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="loss_df_01" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="conclusion">Conclusion</h2> <p>In this post, we’ve walked you through the essential steps for setting up and managing machine learning workflows on the Monsoon HPC cluster. From connecting to Monsoon and performing interactive debugging, to submitting jobs and visualizing results, these guidelines are designed to help you efficiently utilize Monsoon’s powerful resources.</p> <p>Harnessing the capabilities of high-performance computing can significantly accelerate your machine learning projects, enabling you to handle larger datasets, run more complex models, and achieve faster results. By following the steps outlined here, you can optimize your workflow, reduce development time, and focus on what matters most—building and refining your machine learning models.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/RPerform-R-CMD-Check/">R CMD Check on Rperform</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/Implementing-Custom-Github-Actions-in-Rperform/">Implementing Custom Github Action Prototype in Rperform</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/Rperform-Compilation-Errors-And-Fixes/">Fixes to some of the compilation errors of Rperform</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/Touchstone-Test-1/">Testing Touchstone with a simple For Loop</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2022/Touchstone-Review/">Reviewing The Touchstone R Package</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Daniel Agyapong. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>